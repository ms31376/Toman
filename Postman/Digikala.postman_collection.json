{
	"info": {
		"_postman_id": "382b6461-cfe2-4fe1-9d40-f33c66dfd0bd",
		"name": "Digikala",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "9874812",
		"_collection_link": "https://lively-moon-7376.postman.co/workspace/My-Workspace~d52b3b95-31d6-42d8-8149-a2ef276d34b2/collection/9874812-382b6461-cfe2-4fe1-9d40-f33c66dfd0bd?action=share&source=collection_link&creator=9874812"
	},
	"item": [
		{
			"name": "products",
			"item": [
				{
					"name": "list",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response;\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response format must be in JSON\",function(){\r",
									"    pm.response.to.have.jsonBody();\r",
									"    response = pm.response.json();\r",
									"});\r",
									"\r",
									"pm.test(\"Check schema json format\",function(){\r",
									"    const schema = {\r",
									"        type: 'object',\r",
									"        properties:{\r",
									"            \"status\": {\r",
									"                type: 'integer',\r",
									"                enum: [200]\r",
									"            },\r",
									"            \"data\":{\r",
									"                type:'object',\r",
									"                properties:{\r",
									"                    \"filters\":{\r",
									"                        type: 'object'\r",
									"                    },\r",
									"                    \"products\":{\r",
									"                        type: 'array',\r",
									"                        items:{\r",
									"                            type:'object',\r",
									"                            properties:{\r",
									"                                \"id\":{\r",
									"                                    type: 'integer'\r",
									"                                },\r",
									"                                \"title_fa\":{\r",
									"                                    type: 'string'\r",
									"                                },\r",
									"                                \"title_en\":{\r",
									"                                    type: 'string'\r",
									"                                },\r",
									"                                \"url\":{\r",
									"                                    type: 'object',\r",
									"                                    properties:{\r",
									"                                        \"base\":{\r",
									"                                            type:['null','string']\r",
									"                                        },\r",
									"                                        \"uri\":{\r",
									"                                            type:['string']\r",
									"                                        }\r",
									"                                    }\r",
									"        \r",
									"                                },\r",
									"                                \"status\":{\r",
									"                                    type: 'string'\r",
									"                                },\r",
									"                                \"has_quick_view\":{\r",
									"                                    type: 'boolean'\r",
									"                                },\r",
									"                                \"data_layer\":{\r",
									"                                    type: 'object',\r",
									"                                    properties:{\r",
									"                                        \"brand\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"category\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"metric6\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension2\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension6\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension7\":{\r",
									"                                            type:['number','string']\r",
									"                                        },\r",
									"                                        \"dimension9\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension11\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"dimension20\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category2\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category3\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category4\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category5\":{\r",
									"                                            type:'string'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"product_type\":{\r",
									"                                    type: 'string',\r",
									"                                },\r",
									"                                \"test_title_fa\":{\r",
									"                                    type: 'string',\r",
									"                                },\r",
									"                                \"test_title_en\":{\r",
									"                                    typeo: 'string'\r",
									"                                },\r",
									"                                \"digiplus\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"services\":{\r",
									"                                            type:'array'\r",
									"                                        },\r",
									"                                        \"service_list\":{\r",
									"                                            type: 'array'\r",
									"                                        },\r",
									"                                        \"services_summary\":{\r",
									"                                            type:'array'\r",
									"                                        },\r",
									"                                        \"is_jet_eligible\":{\r",
									"                                            type: 'boolean'\r",
									"                                        },\r",
									"                                        \"cash_back\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"is_general_location_jet_eligible\":{\r",
									"                                            type:'boolean'\r",
									"                                        },\r",
									"                                        \"fast_shipping_text\":{\r",
									"                                            type:['string','null']\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"images\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"main\":{\r",
									"                                            type:'object'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"rating\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"rare\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"count\":{\r",
									"                                            type:'integer'\r",
									"                                        }\r",
									"                                    }\r",
									"                                }\r",
									"                            }\r",
									"                        }\r",
									"                        \r",
									"                    }\r",
									"                }\r",
									"            }\r",
									"        }\r",
									"    };\r",
									"    pm.response.to.have.jsonSchema(schema);\r",
									"});\r",
									"function getFirstProductId(response){\r",
									"   return response.data.products[1].id;\r",
									"};\r",
									"\r",
									"try {\r",
									"        let product_id = getFirstProductId(response);\r",
									"        pm.environment.set(\"selected_product_id\", product_id);\r",
									"    } catch (error) {\r",
									"        console.error(\"Error in calculation:\", error);\r",
									"    }"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"accept": true,
							"accept-encoding": true
						}
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}v1/categories/notebook-netbook-ultrabook/brands/asus/search/?page=1",
							"host": [
								"{{url}}v1"
							],
							"path": [
								"categories",
								"notebook-netbook-ultrabook",
								"brands",
								"asus",
								"search",
								""
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "product_with_id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response format must be in JSON\",function(){\r",
									"    pm.response.to.have.jsonBody();\r",
									"    response = pm.response.json();\r",
									"});\r",
									"\r",
									"pm.test(\"Check schema json format\",function(){\r",
									"    const schema = {\r",
									"        type: 'object',\r",
									"        properties:{\r",
									"            \"status\": {\r",
									"                type: 'integer',\r",
									"                enum: [200]\r",
									"            },\r",
									"            \"data\":{\r",
									"                type:'object',\r",
									"                properties:{\r",
									"                    \"product\":{\r",
									"                        type: 'object',\r",
									"                        properties:{\r",
									"                                \"id\":{\r",
									"                                    type: 'integer'\r",
									"                                },\r",
									"                                \"title_fa\":{\r",
									"                                    type: 'string'\r",
									"                                },\r",
									"                                \"title_en\":{\r",
									"                                    type: 'string'\r",
									"                                },\r",
									"                                \"url\":{\r",
									"                                    type: 'object',\r",
									"                                    properties:{\r",
									"                                        \"base\":{\r",
									"                                            type:['null','string']\r",
									"                                        },\r",
									"                                        \"uri\":{\r",
									"                                            type:['string']\r",
									"                                        }\r",
									"                                    }\r",
									"        \r",
									"                                },\r",
									"                                \"status\":{\r",
									"                                    type: 'string'\r",
									"                                },\r",
									"                                \"has_quick_view\":{\r",
									"                                    type: 'boolean'\r",
									"                                },\r",
									"                                \"data_layer\":{\r",
									"                                    type: 'object',\r",
									"                                    properties:{\r",
									"                                        \"brand\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"category\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"metric6\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension2\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension6\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension7\":{\r",
									"                                            type:['number','string']\r",
									"                                        },\r",
									"                                        \"dimension9\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"dimension11\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"dimension20\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category2\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category3\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category4\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"item_category5\":{\r",
									"                                            type:'string'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"product_type\":{\r",
									"                                    type: 'string',\r",
									"                                },\r",
									"                                \"test_title_fa\":{\r",
									"                                    type: 'string',\r",
									"                                },\r",
									"                                \"test_title_en\":{\r",
									"                                    typeo: 'string'\r",
									"                                },\r",
									"                                \"digiplus\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"services\":{\r",
									"                                            type:'array'\r",
									"                                        },\r",
									"                                        \"service_list\":{\r",
									"                                            type: 'array'\r",
									"                                        },\r",
									"                                        \"services_summary\":{\r",
									"                                            type:'array'\r",
									"                                        },\r",
									"                                        \"is_jet_eligible\":{\r",
									"                                            type: 'boolean'\r",
									"                                        },\r",
									"                                        \"cash_back\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"is_general_location_jet_eligible\":{\r",
									"                                            type:'boolean'\r",
									"                                        },\r",
									"                                        \"fast_shipping_text\":{\r",
									"                                            type:['string','null']\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"images\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"main\":{\r",
									"                                            type:'object'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"rating\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"rare\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"count\":{\r",
									"                                            type:'integer'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"colors\":{\r",
									"                                    type:'array',\r",
									"                                    items:{\r",
									"                                        type:'object',\r",
									"                                        properties:{\r",
									"                                            \"id\":{\r",
									"                                                type:'integer'\r",
									"                                            },\r",
									"                                            \"title\":{\r",
									"                                                type:'string'\r",
									"                                            },\r",
									"                                            \"hex_code\":{\r",
									"                                                type:'string'\r",
									"                                            }\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"default_variant\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"id\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"lead_time\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"rank\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"rate\":{\r",
									"                                            type:'number'\r",
									"                                        },\r",
									"                                        \"statistics\":{\r",
									"                                            type:'object'\r",
									"                                        },\r",
									"                                        \"status\":{\r",
									"                                            type:'string'\r",
									"                                        },\r",
									"                                        \"properties\":{\r",
									"                                            type:'object',\r",
									"                                            properties:{\r",
									"                                                \"is_fast_shipping\":{\r",
									"                                                    type:'boolean'\r",
									"                                                },\r",
									"                                                \"is_ship_by_seller\":{\r",
									"                                                    type:'boolean'\r",
									"                                                },\r",
									"                                                \"is_multi_warehouse\":{\r",
									"                                                    type:'boolean'\r",
									"                                                },\r",
									"                                                \"has_similar_variants\":{\r",
									"                                                    type:'boolean'\r",
									"                                                },\r",
									"                                                \"is_rural\":{\r",
									"                                                    type:'boolean'\r",
									"                                                },\r",
									"                                                \"in_digikala_warehouse\":{\r",
									"                                                    type:'boolean'\r",
									"                                                }\r",
									"                                            }\r",
									"                                        }\r",
									"                                    }\r",
									"                                }\r",
									"                            }\r",
									"                        }\r",
									"                }\r",
									"            }\r",
									"        }\r",
									"    };\r",
									"    pm.response.to.have.jsonSchema(schema);\r",
									"});\r",
									"function choseVariantsId(response){\r",
									"    console.log(response.data.product.variants[0].id)\r",
									"   return response.data.product.variants[0].id;\r",
									"};\r",
									"\r",
									"try {\r",
									"        let variants_id = choseVariantsId(response);\r",
									"        pm.environment.set(\"selected_variants_id\", variants_id);\r",
									"    } catch (error) {\r",
									"        console.error(\"Error in calculation:\", error);\r",
									"    }"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}v2/product/{{selected_product_id}}/",
							"host": [
								"{{url}}v2"
							],
							"path": [
								"product",
								"{{selected_product_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "add_to_cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response format must be in JSON\",function(){\r",
									"    pm.response.to.have.jsonBody();\r",
									"    response = pm.response.json();\r",
									"});\r",
									"\r",
									"pm.test(\"Check schema json format\",function(){\r",
									"    const schema = {\r",
									"        type: 'object',\r",
									"        properties:{\r",
									"            \"status\": {\r",
									"                type: 'integer',\r",
									"                enum: [200]\r",
									"            },\r",
									"            \"data\":{\r",
									"                type:'object',\r",
									"                properties:{\r",
									"                    \"cart\":{\r",
									"                        type: 'object',\r",
									"                        properties:{\r",
									"                                \"id\":{\r",
									"                                    type: 'integer'\r",
									"                                },\r",
									"                                \"payable_price\":{\r",
									"                                    type: 'number'\r",
									"                                },\r",
									"                                \"digiclub\":{\r",
									"                                    type: 'object'\r",
									"                                },\r",
									"                                \"voucher_code\":{\r",
									"                                    type: ['null']\r",
									"                                },\r",
									"                                \"cash_back\":{\r",
									"                                    type: 'object',\r",
									"                                    properties:{\r",
									"                                        \"amount\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"digiplus_amount\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"return_days\":{\r",
									"                                            type:'integer'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"temporary_plus_subscription\":{\r",
									"                                    type: 'array'\r",
									"                                },\r",
									"                                \"delivery_package_box\":{\r",
									"                                    type: 'array'\r",
									"                                },\r",
									"                                \"bnpl_active\":{\r",
									"                                    type:'boolean'\r",
									"                                },\r",
									"                                \"rrp_price\":{\r",
									"                                    type:'number'\r",
									"                                },\r",
									"                                \"voucher_discount\":{\r",
									"                                    type:'number'\r",
									"                                },\r",
									"                                \"shipping_cost_discount\":{\r",
									"                                    type:'number'\r",
									"                                },\r",
									"                                \"items_discount\":{\r",
									"                                    type:'number'\r",
									"                                },\r",
									"                                \"total_discount\":{\r",
									"                                    type:'number'\r",
									"                                },\r",
									"                                \"insurance\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        'amount':{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        'discount':{\r",
									"                                            type:'integer'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"plus\":{\r",
									"                                    type:'array'\r",
									"                                },\r",
									"                                \"dk_service\":{\r",
									"                                    type:'array'\r",
									"                                },\r",
									"                                \"delivery_package\":{\r",
									"                                    type:'object',\r",
									"                                    properties:{\r",
									"                                        \"amount\":{\r",
									"                                            type:'integer'\r",
									"                                        },\r",
									"                                        \"discount\":{\r",
									"                                            type:'number'\r",
									"                                        }\r",
									"                                    }\r",
									"                                },\r",
									"                                \"cart_items\":{\r",
									"                                    type: 'array',\r",
									"                                    items:{\r",
									"                                        type:'object',\r",
									"                                        properties:{\r",
									"                                            \"id\":{\r",
									"                                                type:'integer'\r",
									"                                            },\r",
									"                                            \"cart_id\":{\r",
									"                                                type:'integer'\r",
									"                                            },\r",
									"                                            \"quantity\":{\r",
									"                                                type:'integer'\r",
									"                                            },\r",
									"                                            \"price\":{\r",
									"                                                type:'object',\r",
									"                                                properties:{\r",
									"                                                    \"price\":{\r",
									"                                                        type:'number'\r",
									"                                                    },\r",
									"                                                    \"discount\":{\r",
									"                                                        type:'number'\r",
									"                                                    },\r",
									"                                                    \"is_incredible\":{\r",
									"                                                        type:'boolean'\r",
									"                                                    },\r",
									"                                                    \"is_promotion\":{\r",
									"                                                        type:'boolean'\r",
									"                                                    },\r",
									"                                                    \"is_lightening_deal\":{\r",
									"                                                        type:'boolean'\r",
									"                                                    },\r",
									"                                                    \"is_digiplus_promotion\":{\r",
									"                                                        type:'boolean'\r",
									"                                                    }\r",
									"                                                }\r",
									"                                            }\r",
									"                                        }\r",
									"                                    }\r",
									"                                }\r",
									"                            }\r",
									"                        }\r",
									"                }\r",
									"            }\r",
									"        }\r",
									"    };\r",
									"    pm.response.to.have.jsonSchema(schema);\r",
									"});\r",
									"function choseVariantsId(response){\r",
									"    console.log(response.data.product.variants[0].id)\r",
									"   return response.data.product.variants[0].id;\r",
									"};\r",
									"\r",
									"try {\r",
									"        let variants_id = choseVariantsId(response);\r",
									"        pm.environment.set(\"selected_variants_id\", variants_id);\r",
									"    } catch (error) {\r",
									"        console.error(\"Error in calculation:\", error);\r",
									"    }"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"accept": true
						}
					},
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"variant_ids\":[{{selected_variants_id}}],\"pass\":true}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}v2/cart/add/",
							"host": [
								"{{url}}v2"
							],
							"path": [
								"cart",
								"add",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "check_out",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response format must be in JSON\",function(){\r",
									"    pm.response.to.have.jsonBody();\r",
									"    response = pm.response.json();\r",
									"});\r",
									"\r",
									"function getProductId(){\r",
									"    let selected_product_id = pm.environment.get('selected_product_id');\r",
									"    return selected_product_id;\r",
									"};\r",
									"function getProductIdFromCart(response){\r",
									"    return response.data.packages[0].cart_items[0].product.id;\r",
									"};\r",
									"pm.test(\"Verify that the ordered product matches the product in the cart\", function () {\r",
									"    product_id_from_cart = getProductIdFromCart(response)\r",
									"    order_product_id  = getProductId()\r",
									"    pm.expect(product_id_from_cart).to.eql(order_product_id)\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"variant_ids\":[{{selected_variants_id}}],\"pass\":true}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}v2/cart/",
							"host": [
								"{{url}}v2"
							],
							"path": [
								"cart",
								""
							]
						}
					},
					"response": []
				}
			]
		}
	]
}